[home](https://github.com/zeditor01/zowe_db2_tools/blob/main/docs/ZPDT_Build_Path.md)

# 3.3 DAF and UMS : Customise

## Scope of this page

This page provides a worked example of downloading the Portable Software Instance of Query Workload Tuner (DAF and UMS) from ShopZ download server to your z/OS image.

## Starting point

It is assumed that you have already ordered QWT from ShopZ. The order should provide you with a SERVER XML block that allows you to perform a secure download from Shop Z. 

The ShopZ download credentials are valid for a short period, and these ones have since expired. You need to order your copy of QWT through ShopZ using your company's login account.




![cust_dafums_01](/images/cust_dafums_01.jpg)

ee

![cust_dafums_02](/images/cust_dafums_02.jpg)

ee

![cust_dafums_03](/images/cust_dafums_03.jpg)

ee

![cust_dafums_04](/images/cust_dafums_04.jpg)

ee

![cust_dafums_05](/images/cust_dafums_05.jpg)

ee

![cust_dafums_06](/images/cust_dafums_06.jpg)

ee

![cust_dafums_07](/images/cust_dafums_07.jpg)

ee

![cust_dafums_08](/images/cust_dafums_08.jpg)

ee

![cust_dafums_09](/images/cust_dafums_09.jpg)

ee

![cust_dafums_10](/images/cust_dafums_10.jpg)

My DAFUMS.IZP.I1.PARMLIB(ZWEYAML) file looks like this in full.

```
# ZWEYAML: Zowe parameters for IBM Unified Management Server                         
                                                                                     
# Note: not recommended to remove or comment out elements.  Deleting elements        
# can result in unpredictable behavior during upgrades.                              
# Comments added may be removed during IZPSYNCY upgrades.                            
                                                                                     
components:                                                                          
  izp:                                                                               
    #                                                                                
    # This is required by Zowe to launch IZP during Zowe startup.                    
    # It should always be true.                                                      
    #                                                                                
    enabled: true                                                                    
    #                                                                                
    # Whether or not to set -x to enable shell debugging.                            
    # Change only if instructed by IBM customer support.                             
    #                                                                                
    debugShellScripts: false                                                         
    #                                                                                
    # The runtimeDirectory values of the experiences included.                       
    # Example:                                                                       
    #   experiences:                                                                 
    #   - /usr/lpp/IBM/doe/v1r3m0/bin                                                
    #   - /usr/lpp/IBM/afx/v1r2m0/bin                                                
    #   - /usr/lpp/IBM/afn/v1r7m0/bin                                                
    #                                                                                
    experiences:                         
    - /usr/lpp/IBM/afx/v1r2m0/bin    
    #                                                                                
    # The job card that will be used for generated                                   
    # jobs when submitting IZPGENER.                                                 
    #                                                                                
    jobCard:                                                                         
      - //IZPCUST1 JOB (UMS),'UMSCUST',CLASS=A,MSGCLASS=H,                       
      - //       NOTIFY=&SYSUID,REGION=0M,TIME=1440                                  
      - //*                                                                          
    #                                                                                
    # The path where the SMP/E installer places the runtime files. This location     
    # may be read-only so modifications should be done in                            
    # {components.izp.workspaceDirectory}.                                           
    #                                                                                
    runtimeDirectory: "/usr/lpp/IBM/izp/v1r2m0/bin"                                  
    #                                                                                
    # The writable location where Unified Management Server can store files          
    # and other data important to core functionality. This should not be             
    # the same as {components.izp.runtimeDirectory}/ums/var. If you make             
    # your workspace directory inside of your runtime directory, then validation     
    # will fail and you will not be able to proceed with starting the server.        
    #                                                                                
    workspaceDirectory: "/global/ums"                                                
    #                                                                                
    # If applicable, the path of Unified Management Server v1.1                      
    # read/write directory.  This is the value of the IZP_UMS_VARDIR                 
    # variable.  It is recommended to not put the same value for                     
    # workspaceDirectory above.                                                      
    #                                                                                
    migrationDirectory:                                                              
    #                                                                                
    # Properties that will interface with your security manager.                     
    #                                                                                
    security:                                                                        
      #                                                                              
      # Whether to use SAF (system authorization facility) for all UMS access,       
      # rather than relying upon the User and Team list datasets.                    
      #                                                                              
      useSAFOnly: true                                                               
      #                                                                              
      # The following fields are used for authentication specification               
      #                                                                              
      dba:                                                                           
        #                                                                            
        # The type of authentication that the dba user will use                      
        # when connecting to services.                                               
        #                                                                            
        # The options are 'CERTIFICATE' or 'PASSWORD'.                               
        #                                                                            
        # CERTIFICATE authentication is currently supported by IMS subsystems        
        # Db2 subsystems must use PASSWORD authentication                            
        #                                                                            
        defaultAuthenticationMechanism: PASSWORD                                     
        #                                                                            
        # When using CERTIFICATE authentication, this is                             
        # the label of the dba user client certificate. This is                      
        # the label used to connect a certificate to the key ring.                   
        #                                                                            
        defaultDbaUserCertificateLabel:                                              
        #                                                                            
        # When using CERTIFICATE authentication, this is
        # the location of the dba user client certificate                  
        # in URL form.                                                     
        #                                                                  
        # example: safkeyring://ZWESVUSR/ZoweRing                          
        #                                                                  
        defaultDbaUserCertificateLocation:                                 
        #                                                                  
        # When using CERTIFICATE authentication, this is                   
        # the type of key ring that contains the dba user                  
        # client certificate.                                              
        #                                                                  
        # Example: JCERACFKS                                               
        # Example: JCECCARACFKS                                            
        #                                                                  
        defaultDbaUserCertificateKeystoreType:                             
      #                                                                    
      # Second qualifier for SAF checks to IZP resources such              
      # as function, role, and team profiles when                          
      # useSAFOnly is true.                                                
      #                                                                    
      profileQualifier:                                                    
      #                                                                    
      # Encryption using ICSF PKCS#11 services.                            
      #                                                                    
      pkcs11:                                                              
        #                                                                  
        # The user name of dba that goes with the encrypted password.      
        #                                                                  
        dbaUser: IZPDBA                                                    
        #                                                                  
        # The pkcs#11 token where the secret key material is stored.       
        #                                                                  
        token: IZPTOK                                                      
        #                                                                  
        # Path to pkcs#11 provider module.                                 
        #                                                                  
        library: /usr/lpp/pkcs11/lib/csnpca64.so                           
      #                                                                    
      # Used to secure communication over https.                           
      #                                                                    
      certificate:                                                         
        #                                                                  
        # Whether or not Unified Management can use                        
        # self-signed certificates.                                        
        #                                                                  
        allowSelfSigned: true                                              
        #                                                                  
        # Contains trust material used by Unified Management Server.       
        #                                                                  
        # If you want to specify a specific trust store, then you          
        # should remove the leading # on lines with the following          
        # text.                                                            
        #                                                                  
        truststore:                                                        
          #                                                                
          # The path or user and key ring name to a trust store.           
          #                                                                
          # Example: safkeyring:////ZWESVUSR/IZPRING                       
          # Example: file://absolute/path/to/a/truststore                  
          # Note: Keyring syntax must use four slashes (safkeyring:////)   
          # Two slashes (safkeyring://) will not be recognized.            
          #                                                                
          location: "////ZWESVUSR/ZoweKeyring"                             
          #                                                                
          # The type of trust store that is being used.                    
          #                                                                
          # Example: JCERACFKS                                             
          # Example: JKS                                                   
          # Example: PKCS12                                                
          #                                                                
          type: "JCERACFKS"                                                
        #                                                                  
        # Contains key material used by Unified Management Server.         
        #                                                                  
        keystore:                                                          
          #                                                                
          # The path or user and key ring name to a key store.             
          #                                                                
          # Example: safkeyring:////ZWESVUSR/IZPRING                       
          # Example: file://absolute/path/to/a/keystore                    
          #                                                                
          location: "////ZWESVUSR/ZoweKeyring"                             
          #                                                                
          # The type of key store that is being used.                      
          #                                                                
          # Example: JCERACFKS                                             
          # Example: JKS                                                   
          # Example: PKCS12                                                
          #                                                                
          type: "JCERACFKS"
          #                                                                
          # The name of the alias of the server certificate.               
          #                                                                
          alias: "zowes0w1"                                                
      #                                                                    
      # Prefix to generic profiles created during installation. The        
      # profiles are used to denote roles.                                 
      #                                                                    
      profilePrefix:                                                       
        # Super Role                                                       
        super: IZP.SUPER                                                   
        # Administrator Role                                               
        admin: IZP.ADMIN                                                   
      #                                                                    
      # Password-less users that will be created during installation.      
      # These users are able to read and write to the user list and        
      # team list data sets on behalf of users with passwords. The zss     
      # server will conditionally impersonate the users below.             
      #                                                                    
      # Note: At present these user names may not be changed.              
      #                                                                    
      surrogateUser:                                                       
        # Super Role                                                       
        super: IZPSRGSP                                                    
        # Administrator Role                                               
        admin: IZPSRGAD                                                    
      #                                                                    
      # The default group for above users.                                 
      #                                                                    
      surrogateGroup: IZPSRGRP                                             
    #                                                                      
    # Properties that are read by Java to configure the server             
    # when running.                                                        
    #                                                                      
    server:                                                                
      #                                                                    
      # Comma separated list of enabled tls protocols used                 
      # by Unified Management Server as a client and server.               
      #                                                                    
      # tlsVersionList: TLSv1.3                                            
      # tlsVersionList: TLSv1.2                                            
      #                                                                    
      tlsVersionList: TLSv1.2,TLSv1.3                                      
      #                                                                    
      # The desired authentication type for Unified Management Server.     
      #                                                                    
      # authType: STANDARD_JWT                                             
      # authType: MFA_JWT                                                  
      #                                                                    
      authType: STANDARD_JWT                                               
      #                                                                    
      # The ports that Unified Management Server will listen on.           
      #                                                                    
      port:                                                                
        http: 12023                                                        
        agent: 3444                                                        
        gremlin: 8182                                                      
      #                                                                    
      # If nonblank, use instead of zowe.externalDomain[0]                 
      # Useful for HA configuration with DVIPA                             
      host:                                                                
      #                                                                    
      # The log location, FILE, STDOUT (i.e. job output), or BOTH          
      log:                                                                 
        destination: BOTH                                                  
        #                                                                  
        # Option for debug logging.                                        
        # When directed by customer support, to include logging for        
        # UMS classes, remove "[]" and put logging lines each on a         
        # line by itself, indented the same as "properties:", and          
        # preceded by a hyphen.  E.g.                                      
        #                                                                  
        # - com.rocketsoft.example.level=FINE                              
        #                                                                  
        properties: []                                                     
      #                                                                    
      # The maximum number of HTTP requests per user.                      
      #                                                                    
      apiRateCapacityByUser: 600                                           
      #                                                                    
      # The memory to be allocated for Unified Management                  
      # Server in megabytes.                                               
      #                                                                    
      memorySize: 16384                                                    
      #                                                                    
      # The job code for Unified Management Server jobs. The               
      # jobPrefix associated for a team overrides this value.              
      #                                                                    
      jobPrefix: "IZP"                                                     
      failsafeTimeout: 100
      graphQLTimeout: 300                                                                 
      #                                                                                   
      # How frequently to refresh object discovery for registered                         
      # subsystems in hours.                                                              
      #                                                                                   
      # Min=1                                                                             
      # Max=24                                                                            
      #                                                                                   
      objectDiscoveryInterval: 24                                                         
      #                                                                                   
      # A space separated list of lpar names that you'd like to do                        
      # system discovery on.                                                              
      #                                                                                   
      # allSysnames: SYS1 SYS2 SYS3                                                       
      #                                                                                   
      allSysnames: "S0W1"                                                                 
      #                                                                                   
      # An array of Java Virtual Machine arguments to pass to the server.                 
      # javaArgs:                                                                         
      # - -Dcom.rocketsoft.foo=bar                                                        
      #                                                                                   
      javaArgs: []                                                                        
    #                                                                                     
    # These data sets will be used during installation and run time.                      
    # They shouldn't exist unless otherwise specified. The rest will                      
    # be created at some point during the configuration process.                          
    #                                                                                     
    dataset:                                                                              
      #                                                                                   
      # The hlq where the smp/e data sets reside.                                         
      #                                                                                   
      runtimeHlq: "DAFUMS.IZP"                                                            
      #                                                                                   
      # The high-level qualifier for miscellaneous data sets                              
      # created during runtime and installation.                                          
      #                                                                                   
      hlq: "DAFUMS.IZP.I1"                                                                
      #                                                                                   
      # The location of your PARMLIB dataset                                              
      # Use template for recommended value                                                
      #                                                                                   
      parmlib: "DAFUMS.IZP.I1.PARMLIB"                                                    
      #                                                                                   
      # The location for JCL members generated by IZPGENER                                
      # Use template for recommended value                                                
      #                                                                                   
      jcllib: "DAFUMS.IZP.I1.JCLLIB"                                                      
      #                                                                                   
      # Load libraries for various parts of Unified Management Server.                    
      #                                                                                   
      loadLibrary:                                                                        
        db2: "DSND10.SDSNLOAD"                                                            
        # The data set name where the UMS load library resides.                           
        # Optional Parameter                                                              
        # If this value is blank, the default data set (runtimeHlq.SIZPLOAD)              
        # is used. When you move the library,  you need to specify                        
        # the data set name here to override the default.                                 
        izp:                                                                              
      #                                                                                   
      # Contains encrypted password of the dba user in yaml format after                  
      # running the dba encryption shell script.                                          
      #                                                                                   
      dbaEncryption: "DAFUMS.IZP.I1.DBA.ENCRYPT"                                          
      #                                                                                   
      # Contains cache of UMS user data.                                                  
      #                                                                                   
      userList: "DAFUMS.IZP.I1.USERLIST"                                                  
      #                                                                                   
      # Contains cache of UMS team data. This data set should never be modified           
      # manually.                                                                         
      #                                                                                   
      teamList: "DAFUMS.IZP.I1.TEAMLIST"                                                  
    #                                                                                     
    # Contains the paths (uss file path, dataset name, dataset HLQ) to                    
    # find other Db2 tools product's yaml files.                                          
    #                                                                                     
    toolsDiscovery:                                                                       
      #                                                                                   
      # default is true                                                                   
      #                                                                                   
      enabled: true                                                                       
      #                                                                                   
      # An array of strings containing the possible locations of a product's yaml         
      # file. Each of these paths will begin with a 3 letter identifier followed          
      # by a colon to assist in the search for the yaml file. The identifiers are         
      # DIR (uss path) and DSN (fully qualified dataset - this includes PDS in which      
      # case the member name must be present).                                            
      # If enabled is true and discoverySearchPaths is empty then the default search      
      # path is "/usr/lpp"                                                                
      # Example: ["DIR:/usr/lpp/db2tools", "HLQ:BOB.DB2TOOLS", "DSN:ME.DSN.PDS(MEMBER)",
      #           "DSN:ME.DSN.SEQ"]                                             
      discoverySearchPaths: []                                                  
    #                                                                           
    # Zowe app-specific parameters                                              
    #                                                                           
    zowe:                                                                       
      job:                                                                      
        #                                                                       
        # Suffix for Java program which will be run by UMS.  Default is "IZP"   
        #                                                                       
        suffix: IZP                                                             
zowe:                                                                           
  # These zowe items are required by the IZP setup.  Do not edit.               
  setup:                                                                        
    zis:                                                                        
     parmlib:                                                                   
       keys:                                                                    
         IZP.ZSSP.REG: list                                                     
  useConfigmgr: true                                                            
```

![cust_dafums_11](/images/cust_dafums_11.jpg)

ee

![cust_dafums_12](/images/cust_dafums_12.jpg)

ee

![cust_dafums_13](/images/cust_dafums_13.jpg)

ee

![cust_dafums_14](/images/cust_dafums_14.jpg)



My DAFUMS.IZP.I1.SIZPSAMP(IZPGENER)

```
//IZPGENER JOB (UMS),'UMS ALLOC',CLASS=A,MSGCLASS=H,                    
//       NOTIFY=&SYSUID,REGION=0M,TIME=1440                             
//*                                                                     
//* This job is responsible for generating other jobs required          
//* to configure Unified Management Server.                             
//*                                                                     
//* The method of validating your configuration is using                
//* JSON Schema <https://json-schema.org>. Zowe provides                
//* the ConfigMgr to assist in this. This job will invoke               
//* the ConfigMgr to validate your current configuration                
//* before generating any jobs. If there are any values                 
//* that are incorrect, you will be notified. You should                
//* fix the value and then run this job again. You can run              
//* this job as many times as you need.                                 
//*                                                                     
//* Note: Any string with braces has an associated yaml value           
//*       in one of the yaml definitions for Zowe or IZP.               
//*       You should find the value and substitute it.                  
//*                                                                     
//*       {key} -> value                                                
//*                                                                     
//*       Values with the pattern {components.izp...}                   
//*       are located in the IZP yaml.  Other values are                
//*       located in the Zowe yaml.                                     
//*                                                                     
//GENER    EXEC PGM=IKJEFT1B                                            
//ISPPROF  DD   DSN=,DISP=(NEW,DELETE),UNIT=,                           
//   DCB=(RECFM=FB,LRECL=80,BLKSIZE=3120,DSORG=PO),                     
//   SPACE=(3120,(20,5,10))                                             
//*                                                                     
//* Replace {components.izp.dataset.runtimeHlq} with the                
//* HLQ where SMP/E installed data sets are located.                    
//*                                                                     
//SYSPROC  DD   DSN=DAFUMS.IZP.SIZPREXX,DISP=SHR                        
//*                                                                     
//* Replace {zowe.setup.dataset.loadlib} with the data set              
//* that contains Zowe executables. This data set will have             
//* the suffix 'SZWELOAD'.                                              
//*                                                                     
//*                                                                     
//STEPLIB  DD   DSN=ZWE200.SZWELOAD,DISP=SHR                            
//ISPPLIB  DD   DSN=ISP.SISPPENU,DISP=SHR                               
//ISPMLIB  DD   DSN=ISP.SISPMENU,DISP=SHR                               
//ISPTLIB  DD   DSN=ISP.SISPTENU,DISP=SHR                               
//ISPSLIB  DD   DSN=ISP.SISPSENU,DISP=SHR                               
//*                                                                     
//* The order must be as follows.                                       
//*                                                                     
//* izp-schema.json                                                     
//* zowe-yaml-schema.json                                               
//* server-common.json                                                  
//*                                                                     
//* Replace {components.izp.runtimeDirectory} with where your           
//* IZP run time directory is. This is where you placed smp/e           
//* files in USS.                                                       
//*                                                                     
//* Replace {zowe.runtimeDirectory} with where your Zowe run time       
//* directory is.                                                       
//*                                                                     
//MYSCHEMA DD   *,DLM=$$                                                
FILE /usr/lpp/IBM/izp/v1r2m0/bin/ums/izp-schema.json                    
FILE /usr/lpp/zowe/schemas/zowe-yaml-schema.json                        
FILE /usr/lpp/zowe/schemas/server-common.json                           
$$                                                                      
//*                                                                     
//* The order must be as follows.                                       
//*                                                                     
//* IZP PARMLIB (recommended) or yaml file (Zowe 2.5 and below)         
//* Zowe yaml file                                                      
//*                                                                     
//* Replace {components.izp.dataset.parmlib} with the location of the   
//* PARMLIB dataset as specified in the IZP override yaml ZWEYAML.      
//*                                                                     
//MYCONFIG DD   *,DLM=$$                                                
PARMLIB DAFUMS.IZP.I1.PARMLIB                                           
FILE /apps/zowe/v20/zowe.yaml                                           
$$                                                                      
//CMGROUT  DD   SYSOUT=*                                                
//SYSPRINT DD   SYSOUT=*                                                
//SYSTSPRT DD   SYSOUT=*                                                
//*                                                                     
//* Change 'generate' to 'nogenerate' if you only                       
//* want to validate your configuration. The default                    
//* option, 'generate', will validate and then generate                 
//* jobs based on your configuration.                                   
//*                                                                     
//*   - generate
//*   - nogenerate                                    
//*                                                   
//* Change 'noverbose' to 'verbose' below for         
//* advanced logging. This is not needed unless       
//* there is an error.                                
//*                                                   
//*   - verbose                                       
//*   - noverbose                                     
//*                                                   
//SYSTSIN  DD   *                                     
ISPSTART CMD(%IZPGEN00 -                              
generate -                                            
noverbose -                                           
)                                                     
```

Resulting in DAFUMS.**

![cust_dafums_15](/images/cust_dafums_15.jpg)


![cust_dafums_16](/images/cust_dafums_16.jpg)

ee

![cust_dafums_17](/images/cust_dafums_17.jpg)

ee

![cust_dafums_18](/images/cust_dafums_18.jpg)

ee

![cust_dafums_19](/images/cust_dafums_19.jpg)

ee

![cust_dafums_20](/images/cust_dafums_20.jpg)

ee

![cust_dafums_21](/images/cust_dafums_21.jpg)

ee

![cust_dafums_22](/images/cust_dafums_22.jpg)

ee

![cust_dafums_23](/images/cust_dafums_23.jpg)

ee

![cust_dafums_24](/images/cust_dafums_24.jpg)

ee

![cust_dafums_25](/images/cust_dafums_25.jpg)

ee

![cust_dafums_26](/images/cust_dafums_26.jpg)

ee

![cust_dafums_27](/images/cust_dafums_27.jpg)

ee

![cust_dafums_28](/images/cust_dafums_28.jpg)

ee

![cust_dafums_29](/images/cust_dafums_29.jpg)

ee

![cust_dafums_30](/images/cust_dafums_30.jpg)

ee

![cust_dafums_31](/images/cust_dafums_31.jpg)

ee

![cust_dafums_32](/images/cust_dafums_32.jpg)

ee

![cust_dafums_33](/images/cust_dafums_33.jpg)

ee

![cust_dafums_34](/images/cust_dafums_34.jpg)

ee

![cust_dafums_35](/images/cust_dafums_35.jpg)

ee

![cust_dafums_36](/images/cust_dafums_36.jpg)

ee

![cust_dafums_37](/images/cust_dafums_37.jpg)

ee

![cust_dafums_38](/images/cust_dafums_38.jpg)

ee

![cust_dafums_39](/images/cust_dafums_39.jpg)

ee

![cust_dafums_40](/images/cust_dafums_40.jpg)

ee

![cust_dafums_41](/images/cust_dafums_41.jpg)

ee

![cust_dafums_42](/images/cust_dafums_42.jpg)

ee

![cust_dafums_43](/images/cust_dafums_43.jpg)

ee

![cust_dafums_44](/images/cust_dafums_44.jpg)

ee

![cust_dafums_45](/images/cust_dafums_45.jpg)

ee

![cust_dafums_46](/images/cust_dafums_46.jpg)

ee

![cust_dafums_47](/images/cust_dafums_47.jpg)

ee

![cust_dafums_48](/images/cust_dafums_48.jpg)

ee

![cust_dafums_49](/images/cust_dafums_49.jpg)



ee

![cust_dafums_50](/images/cust_dafums_50.jpg)

ee

![cust_dafums_51](/images/cust_dafums_51.jpg)

ee

![cust_dafums_52](/images/cust_dafums_52.jpg)

ee

![cust_dafums_53](/images/cust_dafums_53.jpg)

ee

![cust_dafums_54](/images/cust_dafums_54.jpg)

ee

![cust_dafums_55](/images/cust_dafums_55.jpg)


spares

![cust_dafums_56](/images/cust_dafums_56.jpg)

![cust_dafums_57](/images/cust_dafums_57.jpg)


[home](https://github.com/zeditor01/zowe_db2_tools/blob/main/docs/ZPDT_Build_Path.md)
